var modalNombre,modalId,popupNombre,popupId,marco;$=jQuery.noConflict();var imgDataEdit=$(".block-02 #imgFondo"),imagen=$(".campo-imagen #imagen img"),tituloDataEdit=$(".block-02 #titulo"),subtituloDataEdit=$(".block-02 #subTitulo"),btnTitle=$("#camposSwitch #btnText1"),btnCheck=$("#switch input[type=checkbox]"),btnCheck1=$("#camposSwitch #newTab"),btnCheck2=$("#camposSwitch #sameTab"),btnUrl=$("#camposSwitch #btnUrl"),URLactual=window.location;function modal_edit(titulo,subtitulo,imgUrl,texto,buttonTitle,buttonCheck1,buttonUrl){var ventana="",html="",Modalpopup;html+=`\n    <div class="modal modalPreview" tabindex="-1" id="modalPreview">\n        <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n            <div class="row">\n            <div class="col-4 col-sm-4">\n                <div class="class-imgFondo" style="background-image: url(${imgUrl})"></div>\n            </div>\n            <div class="col-8 col-sm-8">\n                <div class="mb-3 mt-2 row">\n                    <div class="col-12 col-sm- d-flex justify-content-end pd-btnclose">\n                        <div class="col-1">\n                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">      \n                                <div class="boton-close"><span aria-hidden="true">Ã—</span></div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n    \n                <div class="mb-4 row">\n                    <div class="col-12 pd-textmodal">\n                        <div class="content-popup text-center">\n                            <h4>${titulo}</h4>\n                            <h6>${subtitulo}</h6>\n                            ${texto}\n                        </div>\n                    </div>\n                </div>\n                <div class="mb-5 row">\n                    <div class="col-12 pd-textmodal btn-callAction text-center">\n                        <a class="btn btn-success" href="${buttonUrl}" target="${ventana="true"==buttonCheck1?"_blank":"_self"}">\n                            <span>${buttonTitle}</span>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </div>\n        </div>\n    </div>\n    `,$(".page-edit-popup").append(html),new bootstrap.Modal(document.getElementById("modalPreview"),{keyboard:!1}).show()}$(document).ready((function(){$("#btn_crear").on("click",(function(){var Modalpopup;new bootstrap.Modal(document.getElementById("Modalpopup"),{keyboard:!1}).show()}))})),$(document).ready((function(){$(".modalData #btnGuardar").on("click",(function(){modalNombre=$(".modalData #dataNom").val(),modalId=Math.floor(100*Math.random()),$.ajax({url:dataPopup.url,type:"post",dataType:"json",data:{action:"res_data_popup",nonce:dataPopup.seguridad,nombre:modalNombre,id:modalId,tipo:"add",datos_u:dataPopup.objeto},success:function(res){console.log(res.objeto),console.log(res.datos_u),setTimeout((function(){Modalpopup=new bootstrap.Modal(document.getElementById("Modalpopup"),{keyboard:!1}),Modalpopup.hide()}),1500),location.href="?page=res_popup&edit="+modalNombre+"&id="+modalId}})}))})),$(document).ready((function(){$("#tableId tr #btn_editar").on("click",(function(){var item,tr=$(this).parent().parent();popupNombre=tr.attr("data-nombre"),popupId=tr.attr("id"),location.href="?page=res_popup&edit="+popupNombre+"&id="+popupId}))})),$(document).ready((function(){$(".block-01 #volverAtras").on("click",(function(){location.href="?page=res_popup"}))})),$(document).ready((function(){$(".switch").on("click",(function(){var check;$("#switch input[type=checkbox]").is(":checked")?$("#camposSwitch").show(1e3):$("#camposSwitch").hide(1e3)}))})),window.onload=function(){var valores=window.location.search,urlParams=new URLSearchParams(valores),edit=urlParams.has("edit"),idEdit=urlParams.has("id"),checkbox=$("#switch input[type=checkbox]"),validate=checkbox.attr("data-check"),radioButton1=$("#camposSwitch #newTab"),validateRadio1=radioButton1.attr("data-check"),radioButton2=$("#camposSwitch #sameTab"),validateRadio2=radioButton2.attr("data-check");validate="true"===validate,1==edit&&1==idEdit&&(1==validate?checkbox.prop("checked",!0):(checkbox.prop("checked",!1),$("#camposSwitch").hide()),"true"==validateRadio1?radioButton1.prop("checked",!0):radioButton1.prop("checked",!1),"true"==validateRadio2?radioButton2.prop("checked",!0):radioButton2.prop("checked",!1))},$(document).ready((function(){$("#imgFondo").on("click",(function(e){e.preventDefault(),marco?marco.open():((marco=wp.media({frame:"select",title:"Seleccionar la imagen del pop-up",button:{text:"usar imagen"},multiple:!1,library:{type:"image"}})).on("select",(function(){var imgPopup=marco.state().get("selection").first().toJSON();imgDataEdit.val(imgPopup.url),imagen.attr("src",imgPopup.url)})),marco.open())}))})),$(document).ready((function(){$(".block-02 #btnSave").on("click",(function(){var titulo=tituloDataEdit.val(),subtitulo=subtituloDataEdit.val(),imagenUrl=imgDataEdit.val(),textDataEdit=tinyMCE.activeEditor.getContent(),dataNombre=$(this).attr("data-nombre"),buttonCheck=btnCheck.is(":checked"),buttonTitle=btnTitle.val(),buttonCheck1=btnCheck1.is(":checked"),buttonCheck2=btnCheck2.is(":checked"),buttonUrl=btnUrl.val();$.ajax({url:dataCreatePopup.url,type:"post",dataType:"json",data:{action:"res_create_popup",nonce:dataCreatePopup.seguridad,nombre:dataNombre,titulo:titulo,subtitulo:subtitulo,imagen:imagenUrl,texto:textDataEdit,buttonCheck:buttonCheck,buttonTitle:buttonTitle,buttonCheck1:buttonCheck1,buttonCheck2:buttonCheck2,buttonUrl:buttonUrl,tipo:"create"},success:function(res){console.log(res),location.href=URLactual,console.log(res.data),console.log(res.objeto)}})}))})),$(document).ready((function(){$(".page-edit-popup #btnPreview").on("click",(function(e){var titulo,subtitulo,imgUrl,texto,buttonTitle,buttonCheck1,buttonUrl;e.preventDefault(),modal_edit(tituloDataEdit.val(),subtituloDataEdit.val(),imagen.attr("src"),tinyMCE.activeEditor.getContent(),btnTitle.val(),btnCheck1.attr("data-check"),btnUrl.val())}))})),$(document).ready((function(){$("#tableId tr #btn_eliminar").on("click",(function(){var item=$(this),objeto=item.attr("data-objeto"),tr=item.parent().parent();popupNombre=tr.attr("data-nombre"),popupId=tr.attr("id");var deletePopupEdit=popupNombre+"-ID-"+popupId;$.ajax({url:dataPopup.url,type:"post",dataType:"json",data:{action:"res_data_popup",nonce:dataPopup.seguridad,nombre:deletePopupEdit,objeto:objeto,tipo:"delete"},success:function(res){var deleteElement;document.getElementById(popupId).remove(),location.href=URLactual}})}))}));